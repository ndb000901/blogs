# Sntinel 热点规则

Sentinel 的**热点参数限流（热点规则）**，用于控制某个资源下「某些**高频访问参数**」的访问频率。它是 Sentinel 非常实用的一种限流策略，尤其适用于**某些 ID（如用户 ID、商品 ID）访问过于频繁**的场景。

---

## 1. 热点参数限流（Hotspot Rule）

### 使用场景

比如你有个商品详情接口 `/product/detail?id=123`，如果 ID=123 这个商品太热门，频繁被访问，就容易对后端造成压力。  
**热点限流**可以限制：
> 某接口下特定参数值的访问频率，比如：  
> `/product/detail?id=123` 每秒最多 5 次  
> `/product/detail?id=456` 每秒最多 10 次

---

## 2. 热点规则核心字段

| 字段名 | 含义 |
|--------|------|
| `resource` | 资源名（如方法名、接口名） |
| `paramIdx` | 热点参数的位置（从 0 开始） |
| `count` | 每秒最大 QPS |
| `durationInSec` | 统计时间窗口（默认 1s） |
| `controlBehavior` | 控制行为（如直接拒绝、匀速排队） |
| `burst` | 是否允许突发请求（默认 0） |
| `paramFlowItemList` | 针对不同参数值设置不同限流值 |

---


## 3. 控制行为 controlBehavior

| 值 | 含义 |
|----|------|
| `0` | 直接拒绝（默认） |
| `1` | 匀速排队（WarmUp）|
| `2` | 预热（排队 + 慢启动）|

---


## 4. 建议

| 场景 | 建议 |
|------|------|
| 热门商品、热门文章、明星直播等 | 限制热点参数访问 |
| 接口性能敏感，但只有少量值会爆发 | 热点规则优于全局限流 |
| 参数组合多，但集中访问几种 | 热点规则性价比高 |
| 想精细化控制不同参数值限流策略 | 用 paramFlowItemList |

---
