# 缓存击穿


**缓存击穿**是指缓存中某个数据在某个时刻失效，且恰好有大量请求同时到达该数据，导致这些请求直接访问数据库，造成数据库压力剧增，严重时可能导致数据库崩溃。


## 1. 缓存击穿的原因

- **缓存失效**：缓存中的数据在某个时刻失效（比如过期或被主动删除），但同时大量请求会访问该数据，导致数据库负载瞬间增大。
- **热点数据**：某些数据是高频访问的热点数据，通常它们的缓存会过期或失效。一旦缓存失效，可能瞬间涌入大量的请求，访问数据库。
- **并发请求**：并发请求不经过缓存，而是直接查询数据库，导致数据库的并发压力增加。

## 2. 缓存击穿的影响

- **增加数据库压力**：如果大量请求同时访问数据库，可能会导致数据库的压力剧增，甚至引起数据库的宕机。
- **系统性能下降**：缓存的目的是为了减少数据库访问，提升系统性能，但一旦发生缓存击穿，数据库的访问量骤增，反而会影响系统的响应速度和稳定性。
- **影响用户体验**：数据库负载过高时，系统响应变慢或不可用，直接影响到用户体验。

## 3. 解决方案


### 3.1 **互斥锁（锁机制）**

**思路**：在缓存失效时，使用互斥锁（例如分布式锁）保证同一时间只有一个请求可以访问数据库，其他请求等待缓存重新加载，从而避免多个请求同时访问数据库。

**优缺点**：
- **优点**：有效避免了大量并发请求直接访问数据库。
- **缺点**：可能会增加锁竞争的开销，锁粒度过大会降低并发性能。

### 3.3 **缓存预加载（提前加载）**

通过提前加载一些热门数据到缓存中，确保这些数据不会因为缓存失效而直接访问数据库。



