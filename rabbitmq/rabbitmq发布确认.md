# rabbitmq发布确认

RabbitMQ 发布确认（Publisher Confirms）是一种机制，用于确保消息从生产者成功发送到 RabbitMQ 服务器。它解决了以下问题：

* **消息丢失：** 在网络问题或 RabbitMQ 服务器故障的情况下，消息可能在发送过程中丢失。
* **可靠性：** 发布确认提高了消息传递的可靠性，确保生产者知道消息是否已成功被 RabbitMQ 接收。

## 1.发布确认的工作原理

1.  **启用发布确认：** 生产者在通道（Channel）上启用发布确认模式。
2.  **发送消息：** 生产者发送消息到 RabbitMQ。
3.  **确认或否定确认：**
    * 如果 RabbitMQ 成功接收到消息，它会向生产者发送一个确认（ACK）。
    * 如果 RabbitMQ 无法接收消息（例如，由于内部错误），它会发送一个否定确认（NACK）。
4.  **生产者处理确认：** 生产者收到确认后，可以安全地认为消息已成功发送。如果收到否定确认，生产者可以采取适当的措施，例如重新发送消息。

## 2.发布确认的类型

[代码示例](../java/rabbitmq/rabbitmq发布确认.md)

* **简单发布确认：** 生产者发送一条消息后，等待 RabbitMQ 的确认。这种方式简单，但性能较低，因为它需要为每条消息等待确认。
* **批量发布确认：** 生产者发送一批消息后，等待 RabbitMQ 的确认。这种方式提高了性能，因为它减少了确认的次数。
* **异步发布确认：** 生产者发送消息后，通过回调函数异步处理 RabbitMQ 的确认。这种方式提供了更高的性能和灵活性。

## 3.发布确认的优点

* **提高可靠性：** 确保消息不会丢失。
* **增强数据完整性：** 确保消息成功传递到 RabbitMQ。
* **简化错误处理：** 允许生产者检测和处理消息发送失败。

## 4.发布确认的缺点

* **性能影响：** 启用发布确认会增加消息发送的延迟，因为它需要等待 RabbitMQ 的确认。
* **复杂性：** 实现发布确认需要额外的代码来处理确认和否定确认。


