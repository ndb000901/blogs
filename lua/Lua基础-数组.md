# Lua基础-数组

在 Lua 中，数组是以表（table）形式实现的。Lua 的表是一种多功能的数据结构，既可以用作数组，也可以用作哈希表或字典。虽然 Lua 没有专门的数组类型，但表的灵活性使其能很方便地充当数组。

## 1. **数组的定义**

在 Lua 中，数组通常使用数字作为索引来表示。Lua 的表索引是从 1 开始的，而不是像 C 语言那样从 0 开始。

### 1.1 **定义数组**

你可以直接使用花括号 `{}` 来创建数组，并为每个元素指定值。

```lua
local arr = {10, 20, 30, 40, 50}
```

这个数组包含了五个元素，索引分别是 1 到 5。

### 1.2 **空数组**

也可以创建一个空数组，然后通过索引逐个赋值。

```lua
local arr = {}
arr[1] = "Lua"
arr[2] = "is"
arr[3] = "awesome"
```

---

## 2. **访问数组元素**

你可以使用数组的索引来访问其元素。在 Lua 中，数组索引从 1 开始。

```lua
local arr = {10, 20, 30, 40, 50}
print(arr[1])  -- 输出 10
print(arr[2])  -- 输出 20
```

你也可以在访问时使用负数索引来访问表的倒数位置。

```lua
print(arr[-1])  -- 输出 50 (倒数第一个元素)
```

---

## 3. **修改数组元素**

你可以通过索引修改数组中的元素。

```lua
local arr = {10, 20, 30}
arr[2] = 100  -- 修改第二个元素
print(arr[2])  -- 输出 100
```

---

## 4. **数组的长度**

获取数组的长度可以通过 `#` 运算符，适用于表的连续部分（即索引从 1 到 `n`，没有间断的情况）。

```lua
local arr = {10, 20, 30, 40, 50}
print(#arr)  -- 输出 5
```

对于稀疏数组（索引有间隙的情况），`#` 运算符的结果可能不会如预期。

```lua
local arr = {10, 20, [5] = 50}
print(#arr)  -- 输出 2
```

---

## 5. **数组遍历**

Lua 提供了 `for` 循环来遍历数组。可以使用普通的 `for` 循环或 `ipairs` 函数来遍历。

### 5.1 **使用 `for` 循环**

```lua
local arr = {10, 20, [5] = 50}

for i = 1, #arr do
    print(arr[i])
end
```

#### 输出：

```text
10
20
```

### 5.2 **使用 `ipairs`**

`ipairs` 是一个迭代器，用于遍历数组（按顺序访问连续的索引）

```lua
local arr = {10, 20, [5] = 50}

for k, v in ipairs(arr) do
    print(k, v)
end
```
#### 输出：
```text
1       10
2       20
```


### 5.3 **使用 `pairs`**

如果你希望遍历整个表（包括作为哈希表使用的部分），可以使用 `pairs`。

```lua
local arr = {10, 20, [5] = 50}

for k, v in pairs(arr) do
    print(k, v)
end
```

#### 输出

```text
1       10
2       20
5       50
```

---

## 6. **数组操作**

### 6.1 **插入元素**

Lua 标准库提供了 `table.insert` 函数用于向数组中插入元素。你可以指定一个索引来插入元素，也可以直接在数组末尾插入元素。

```lua
local arr = {10, 20, 30}
table.insert(arr, 40)        -- 插入到末尾
table.insert(arr, 2, 15)     -- 在第二个位置插入 15
for i, v in ipairs(arr) do
    print(i, v)
end
```

### 6.2 **删除元素**

Lua 标准库提供了 `table.remove` 函数用于删除数组中的元素。它会根据索引删除元素，并自动调整数组的顺序。

```lua
local arr = {10, 20, 30, 40}
table.remove(arr, 2)  -- 删除第二个元素（20）
for i, v in ipairs(arr) do
    print(i, v)
end
```
